# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒĞ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ file2text

## ğŸ—ï¸ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    file2text (Main Package)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Transcriber  â”‚  â”‚  Diarizer    â”‚  â”‚ Summarizer   â”‚     â”‚
â”‚  â”‚  (Whisper)   â”‚â†’ â”‚ (pyannote)   â”‚â†’ â”‚ (RUT5)       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                 â”‚                 â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                           â”‚                                â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                  â”‚   Vectorizer    â”‚                       â”‚
â”‚                  â”‚ (sentence-      â”‚                       â”‚
â”‚                  â”‚  transformers)  â”‚                       â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚         File2Text (Unified API)               â”‚         â”‚
â”‚  â”‚  - process() - Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½                â”‚         â”‚
â”‚  â”‚  - transcribe() - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ñ         â”‚         â”‚
â”‚  â”‚  - summarize() - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑÑƒĞ¼Ğ¼Ğ°Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ          â”‚         â”‚
â”‚  â”‚  - vectorize() - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ          â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. ĞšĞ°Ğº Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ°:                                         â”‚
â”‚     from file2text import File2Text                         â”‚
â”‚     processor = File2Text()                                 â”‚
â”‚     result = processor.process("audio.mp3")                â”‚
â”‚                                                              â”‚
â”‚  2. Ğ§ĞµÑ€ĞµĞ· CLI:                                              â”‚
â”‚     file2text audio.mp3 --summarize --vectorize              â”‚
â”‚                                                              â”‚
â”‚  3. Ğ’ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ñ…:                                      â”‚
â”‚     import file2text                                        â”‚
â”‚     text = file2text.transcribe("audio.mp3")                â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹

### core/transcriber.py
```python
class Transcriber:
    def __init__(self, model="medium", device="cuda"):
        self.model = whisper.load_model(model, device=device)
    
    def transcribe(self, audio_path, **kwargs):
        """Ğ¢Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ñ Ğ°ÑƒĞ´Ğ¸Ğ¾ Ğ² Ñ‚ĞµĞºÑÑ‚"""
        return self.model.transcribe(audio_path, **kwargs)
    
    def get_segments(self, audio_path):
        """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ñ‹ Ñ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¼ĞµÑ‚ĞºĞ°Ğ¼Ğ¸"""
        result = self.transcribe(audio_path)
        return result['segments']
```

### core/diarizer.py
```python
class Diarizer:
    def __init__(self, auth_token=None):
        self.pipeline = Pipeline.from_pretrained(
            "pyannote/speaker-diarization",
            use_auth_token=auth_token
        )
    
    def diarize(self, audio_path):
        """Ğ”Ğ¸Ğ°Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ¿Ğ¸ĞºĞµÑ€Ğ¾Ğ²"""
        return self.pipeline(audio_path)
    
    def assign_speakers(self, segments, diarization):
        """Ğ¡Ğ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ĞºĞµÑ€Ğ¾Ğ² Ñ ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸"""
        # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° ÑĞ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
```

### core/summarizer.py
```python
class Summarizer:
    def __init__(self, model="IlyaGusev/rut5_base_sum_gazeta"):
        self.pipeline = pipeline('summarization', model=model)
    
    def summarize(self, text, **kwargs):
        """Ğ¡ÑƒĞ¼Ğ¼Ğ°Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµĞºÑÑ‚Ğ°"""
        # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° ÑÑƒĞ¼Ğ¼Ğ°Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ¾Ğ¹
    
    def summarize_by_speakers(self, speaker_text):
        """Ğ¡ÑƒĞ¼Ğ¼Ğ°Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ÑĞ¿Ğ¸ĞºĞµÑ€Ğ°Ğ¼"""
```

### core/vectorizer.py (Ğ½Ğ¾Ğ²Ñ‹Ğ¹)
```python
class Vectorizer:
    def __init__(self, model="paraphrase-multilingual-MiniLM-L12-v2"):
        self.model = SentenceTransformer(model)
    
    def vectorize(self, text):
        """Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµĞºÑÑ‚Ğ°"""
        return self.model.encode(text)
    
    def similarity(self, text1, text2):
        """Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ ÑÑ…Ğ¾Ğ¶ĞµÑÑ‚Ğ¸"""
        vec1 = self.vectorize(text1)
        vec2 = self.vectorize(text2)
        return cosine_similarity([vec1], [vec2])[0][0]
    
    def search(self, query, texts, top_k=5):
        """ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²"""
        query_vec = self.vectorize(query)
        text_vecs = self.vectorize_batch(texts)
        similarities = cosine_similarity([query_vec], text_vecs)[0]
        indices = similarities.argsort()[-top_k:][::-1]
        return [(texts[i], similarities[i]) for i in indices]
```

### Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ File2Text
```python
class File2Text:
    def __init__(self, config=None):
        self.transcriber = Transcriber(config.whisper_model)
        self.diarizer = Diarizer(config.hf_token)
        self.summarizer = Summarizer(config.summarizer_model)
        self.vectorizer = Vectorizer(config.vectorizer_model)
    
    def process(self, audio_path, **options):
        """ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸"""
        result = ProcessingResult()
        
        if options.get('transcribe', True):
            result.text = self.transcriber.transcribe(audio_path)
        
        if options.get('diarize', False):
            result.speakers = self.diarizer.assign_speakers(...)
        
        if options.get('summarize', False):
            result.summary = self.summarizer.summarize(result.text)
        
        if options.get('vectorize', False):
            result.vectors = self.vectorizer.vectorize(result.text)
        
        return result
```

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
ĞÑƒĞ´Ğ¸Ğ¾ Ñ„Ğ°Ğ¹Ğ»
    â”‚
    â–¼
[Audio Converter] â†’ WAV (16kHz, mono)
    â”‚
    â–¼
[Transcriber] â†’ Ğ¢ĞµĞºÑÑ‚ + ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ñ‹
    â”‚
    â”œâ”€â†’ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚
    â”‚
    â””â”€â†’ [Diarizer] â†’ Ğ¢ĞµĞºÑÑ‚ Ğ¿Ğ¾ ÑĞ¿Ğ¸ĞºĞµÑ€Ğ°Ğ¼
            â”‚
            â–¼
        [Summarizer] â†’ Ğ¡ÑƒĞ¼Ğ¼Ğ°Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
            â”‚
            â–¼
        [Vectorizer] â†’ Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ñ‹ (embeddings)
            â”‚
            â–¼
        Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ (JSON/Ğ¾Ğ±ÑŠĞµĞºÑ‚)
```

## ğŸ’¾ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²

```python
@dataclass
class ProcessingResult:
    audio_path: str
    text: str = None
    segments: List[Dict] = None
    speakers: Dict[str, str] = None
    summary: Dict[str, str] = None  # full, by_speakers, combined
    vectors: np.ndarray = None
    metadata: Dict = None
```

## ğŸ”Œ Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 1. ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚
```python
import file2text

processor = file2text.File2Text()
result = processor.process("audio.mp3")
```

### 2. ĞŸĞ¾ÑÑ‚Ğ°Ğ¿Ğ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
```python
from file2text import Transcriber, Summarizer, Vectorizer

transcriber = Transcriber()
text = transcriber.transcribe("audio.mp3")

summarizer = Summarizer()
summary = summarizer.summarize(text)

vectorizer = Vectorizer()
vectors = vectorizer.vectorize(text)
```

### 3. CLI
```bash
file2text audio.mp3 --summarize --vectorize
```

### 4. Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹
```python
from file2text.core import Transcriber

class MyApp:
    def __init__(self):
        self.transcriber = Transcriber()
    
    def process_audio(self, path):
        return self.transcriber.transcribe(path)
```
